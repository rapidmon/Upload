<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>트위터 예약 전송 프로그램</title>
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="./reset.css">
</head>
<body>
    <form id="tweetForm">
        <input type="text" placeholder="기사 요약" name="summary" id="summary">
        <input type="url" placeholder="링크" name="link" id="link">
        <input type="datetime-local" name="schedule" id="schedule">
        <input type="button" value="submit" id="submitBtn">
    </form>
</body>
<script>
    document.getElementById('submitBtn').addEventListener('click', async function() {
        var summary = document.getElementById('summary').value;
        var link = document.getElementById('link').value;
        var schedule = document.getElementById('schedule').value;
    
        // API Gateway 엔드포인트로 전송할 데이터 객체
        var tweetData = {
            summary: summary,
            link: link,
            schedule: schedule
        };
    
        // API Gateway 엔드포인트 URL
        var apiEndpoint = 'https://nu0ww2fb5l.execute-api.ap-southeast-2.amazonaws.com/Stage/tweet';
    
        try {
            // Fetch API를 사용하여 데이터 전송
            const response = await fetch(apiEndpoint, {
                method: 'POST',
                body: JSON.stringify(tweetData),
                headers: {
                    'Content-Type': 'application/json'
                }
            });
    
            if (response.ok) {
                console.log('Tweet scheduled successfully');
                alert('트윗이 예약되었습니다!');
            } else {
                console.error('Failed to schedule tweet');
                alert('트윗 예약에 실패했습니다.');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('트윗 예약 중 에러가 발생했습니다.');
        }
    });
    </script>
</html>